{
  "name": "Agents Sandbox",
  "init": true,
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "TZ": "${localEnv:TZ:UTC}",
      "CLAUDE_CODE_VERSION": "latest",
      "CODEX_VERSION": "latest"
    }
  },
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": false,
      "upgradePackages": false
    }
  },
  "remoteUser": "dev",
  "postCreateCommand": "uv run --no-sync /workspace/.devcontainer/post_install.py && gem install bundler -v 2.7.2 --no-document && bundle config set --global path 'vendor/bundle'",
  "mounts": [
    "source=commandhistory,target=/commandhistory,type=volume",
    "source=${localEnv:HOME}/.claude,target=/home/dev/.claude,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.codex,target=/home/dev/.codex,type=bind,consistency=cached",
    "source=gh-config,target=/home/dev/.config/gh,type=volume",
    "source=${localEnv:HOME}/.gitconfig,target=/home/dev/.gitconfig,type=bind,consistency=cached,readonly"
  ],
  "containerEnv": {
    "NODE_OPTIONS": "--max-old-space-size=4096",
    "CLAUDE_CONFIG_DIR": "/home/dev/.claude",
    "CODEX_HOME": "/home/dev/.codex",
    "BUNDLE_PATH": "vendor/bundle",
    "PGHOST": "host.docker.internal",
    "REDIS_URL": "redis://host.docker.internal:6379"
  },
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=delegated",
  "workspaceFolder": "/workspace"
}
